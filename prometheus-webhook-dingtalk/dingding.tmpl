{{ define "__subject" }}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}]
{{ end }}


{{ define "__alert_list" }}{{ range . }}
---
**å‘Šè­¦åç§°**: {{ index .Annotations "title" }}

**å‘Šè­¦çº§åˆ«**: {{ .Labels.severity }}

**å‘Šè­¦ä¸»æœºç»„**: {{ .Labels.group }}

**å‘Šè­¦ä¸»æœº**: {{ .Labels.instance }}

**å›¾è¡¨æ•°æ®**: [Click]({{ .GeneratorURL }})

**å‘Šè­¦ä¿¡æ¯**: {{ index .Annotations "description" }}

**å‘Šè­¦æ—¶é—´**: {{ dateInZone "2006.01.02 15:04:05" (.StartsAt) "Asia/Shanghai" }}

**é¢„æ¡ˆé“¾æ¥**: [CONFæ–‡æ¡£]({{ index .Annotations "plan_url" }})

{{ end }}{{ end }}

{{ define "__resolved_list" }}{{ range . }}
---
**å‘Šè­¦åç§°**: {{ index .Annotations "title" }}

**å‘Šè­¦çº§åˆ«**: {{ .Labels.severity }}

**å‘Šè­¦ä¸»æœº**: {{ .Labels.instance }}

**å›¾è¡¨æ•°æ®**: [Click]({{ .GeneratorURL }})

**å‘Šè­¦ä¿¡æ¯**: {{ index .Annotations "description" }}

**å‘Šè­¦æ—¶é—´**: {{ dateInZone "2006.01.02 15:04:05" (.StartsAt) "Asia/Shanghai" }}

**æ¢å¤æ—¶é—´**: {{ dateInZone "2006.01.02 15:04:05" (.EndsAt) "Asia/Shanghai" }}
{{ end }}{{ end }}


{{ define "default.title" }}
{{ template "__subject" . }}
{{ end }}

{{ define "default.content" }}
{{ if gt (len .Alerts.Firing) 0 }}
**ğŸ’”ğŸ’”ğŸ’”ä¾¦æµ‹åˆ°{{ .Alerts.Firing | len  }}ä¸ªå‘Šè­¦ğŸ’”ğŸ’”ğŸ’”**
{{ template "__alert_list" .Alerts.Firing }}
---
{{ end }}

{{ if gt (len .Alerts.Resolved) 0 }}
**ğŸ’šğŸ’šğŸ’šæ¢å¤{{ .Alerts.Resolved | len  }}ä¸ªå‘Šè­¦ğŸ’šğŸ’šğŸ’š**
{{ template "__resolved_list" .Alerts.Resolved }}
{{ end }}
{{ end }}

{{ define "ding.link.title" }}{{ template "default.title" . }}{{ end }}
{{ define "ding.link.content" }}{{ template "default.content" . }}{{ end }}
{{ template "default.title" . }}
{{ template "default.content" . }}

